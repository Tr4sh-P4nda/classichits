<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>LPC</title>
    <script src="https://aframe.io/releases/0.3.0/aframe.min.js"></script>
    <script src="https://cdn.rawgit.com/AltspaceVR/aframe-altspace-component/v1.4.0/dist/aframe-altspace-component.min.js"></script>
    <script src="https://sdk.altvr.com/libs/altspace.js/0.28.1/altspace.min.js"></script>
    <script src="https://unpkg.com/aframe-randomizer-components@^3.0.1/dist/aframe-randomizer-components.min.js"></script>
    
     

    <!--Script for optimizing texture loading-->
    <script>
        // We override the default image loader since we don't want the altspace browser to load textures.
        // The client handles texture loading directly.
        function getTexture (url, resolve) {
            // construct absolute url
            if (url && !url.startsWith('http') && !url.startsWith('//')) {
                if (url.startsWith('/')) {
                    url = location.origin + url;
                }
                else {
                    var currPath = location.pathname;
                    if (!currPath.endsWith('/')) {
                        currPath = location.pathname.split('/').slice(0, -1).join('/') + '/';
                    }
                    url = location.origin + currPath + url;
                }
            }
            console.info('Allowing Altspace to load ' + url);
            var image = {src: url};
            var tex = new THREE.Texture(image);
            if (resolve) {
                resolve(tex);
            }
            return tex;
        }
        AFRAME.utils.srcLoader.validateSrc = function (src, loadImage) { loadImage(src.match(/url\((.+)\)/)[1]); };
        THREE.Loader.Handlers.add(/jpe?g|png/i, { load: getTexture });
        THREE.TextureLoader.prototype.load = getTexture;
    </script>
    
</head>

    
<body>
<a-scene altspace=fullspace:true  sync-system="author: fae; app: lpc">
    <a-assets>
    <a-asset-item id="d1-obj" src="assets/d1.obj"></a-asset-item>
    <a-asset-item id="d1-mtl" src="assets/d1.mtl"></a-asset-item>
    <a-asset-item id="lpc6-obj" src="assets/lpc6.obj"></a-asset-item>
    <a-asset-item id="lpc6-mtl" src="assets/lpc6.mtl"></a-asset-item>
    <a-asset-item id="weird3-obj" src="assets/weird3.obj"></a-asset-item>
    <a-asset-item id="weird3-mtl" src="assets/weird3.mtl"></a-asset-item>
    <a-asset-item id="rd1-obj" src="assets/rd1.obj"></a-asset-item>
    <a-asset-item id="rd1-mtl" src="assets/rd1.mtl"></a-asset-item>
    <a-asset-item id="playground-obj" src="assets/playground.obj"></a-asset-item>
    <a-asset-item id="playground-mtl" src="assets/playground.mtl"></a-asset-item>
    <a-asset-item id="house1-obj" src="assets/house1.obj"></a-asset-item>
    <a-asset-item id="house1-mtl" src="assets/house1.mtl"></a-asset-item>
    <a-asset-item id="easter1-obj" src="assets/easter1.obj"></a-asset-item>
    <a-asset-item id="easter1-mtl" src="assets/easter1.mtl"></a-asset-item>
    <a-asset-item id="cheese2-obj" src="assets/cheese2.obj"></a-asset-item>
    <a-asset-item id="cheese2-mtl" src="assets/cheese2.mtl"></a-asset-item>
        
    </a-assets>
    
    
    

    
 <!--objects -->
 <a-entity obj-model="obj: #d1-obj; mtl: #d1-mtl" position="0 1.3 0" rotation="0 90 0"></a-entity>
 <a-entity obj-model="obj: #lpc6-obj; mtl: #lpc6-mtl" rotation="-90 90 0" position="0 -12 0" scale="14 14 14" n-mesh-collider="type: environment; convex: false" altspace-cursor-collider="enabled: false"></a-entity>
 <a-entity obj-model="obj: #weird3-obj; mtl: #weird3-mtl" rotation="-90 90 180" position="5.6 -6.4 0" scale="8 8 8 " n-mesh-collider="type: environment; convex: false" altspace-cursor-collider="enabled: false"></a-entity>
 <a-entity obj-model="obj: #rd1-obj; mtl: #rd1-mtl" rotation="-90 90 0" position="-14 -4.5 0" scale="6 6 6" n-mesh-collider="type: environment; convex: false" altspace-cursor-collider="enabled: false"></a-entity>  
 <a-entity obj-model="obj: #playground-obj; mtl: #playground-mtl" rotation="-90 90 0" position="-14 -15.5 17" scale="18 18 18" n-mesh-collider="type: environment; convex: false" altspace-cursor-collider="enabled: false"></a-entity>   
 <a-entity obj-model="obj: #house1-obj; mtl: #house1-mtl" rotation="-90 90 10" position="-14 -14 -17" scale="16 16 16" n-mesh-collider="type: environment; convex: false" altspace-cursor-collider="enabled: false"></a-entity> 
 <a-entity obj-model="obj: #easter1-obj; mtl: #easter1-mtl" rotation="-90 90 -40" position="5.6 -15.5 -17" scale="18 18 18" n-mesh-collider="type: environment; convex: false" altspace-cursor-collider="enabled: false"></a-entity>
 <a-entity obj-model="obj: #cheese2-obj; mtl: #cheese2-mtl" rotation="-93 90 -40" position="26.6 -11.5 -17" scale="18 18 18" n-mesh-collider="type: environment; convex: false" altspace-cursor-collider="enabled: false"></a-entity>
    
 <!--sky-->
 <a-sky radius="130" src="images/sky.jpg" segments-width="10" position="0 -10 35" segments-height="20"></a-sky>

 <a-plane src="images/rainbowroomwelcomesign.jpg" height="5" width="11.2" rotation="0 0 0" radius="2" side="double" position="0 10 0">
    </a-plane>
    
 <!-- Held doughnut - code all blocked out
    
<a-mixin id="held-doughnut" obj-model="obj: #d1-obj; mtl: #d1-mtl" collapse-model scale="0.02 0.02 0.02"></a-mixin>
<a-mixin id="parent-to-right-hand" position="-0.25 -0.05 -0.12" rotation="180 -135 0" n-skeleton-parent="part: hand; side: right;" sync sync-n-skeleton-parent></a-mixin>

<a-entity id="held-doughnut-instantiator" mixin="held-doughnut" instantiator="on: click; mixin: held-doughnut parent-to-right-hand" position="1.5 1.5 -3" rotation="90 90 0"></a-entity>
    
-->

</a-scene>




</body>
</html>
